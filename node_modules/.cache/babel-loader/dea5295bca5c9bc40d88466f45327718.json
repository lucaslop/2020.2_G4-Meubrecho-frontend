{"ast":null,"code":"var _jsxFileName = \"/home/lucaslopes/\\xC1rea de Trabalho/2020.2_G4-Meubrecho-frontend/src/pages/Venda/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport history from '../../services/history';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Item from '../../components/item/item';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Venda() {\n  _s();\n\n  const [products, setProducts] = useState([]);\n\n  const getProducts = () => {\n    let token;\n    token = localStorage.getItem('authToken');\n\n    if (products.length === 0) {\n      console.log('teste', products);\n      var myHeaders = new Headers();\n      myHeaders.append('Authorization', `Bearer ${token}`);\n      var myInit = {\n        method: 'GET',\n        headers: myHeaders\n      };\n      const request = new Request('http://localhost:3333/productbyme', myInit);\n      return fetch(request).then(response => {\n        if (response.status == 401) {\n          localStorage.clear();\n          history.push('/');\n          throw 'permission error';\n        }\n\n        return response.json();\n      }).then(jsonResponse => {\n        console.log('api', jsonResponse);\n        if (jsonResponse.arrayProduct.length !== 0) setProducts(jsonResponse.arrayProduct);else setProducts({\n          error: 'Sem Protutos na loja'\n        });\n        return products;\n      }).catch(e => {\n        console.log(e);\n      });\n    } else return products;\n  };\n\n  function onClickRemove(productId) {\n    console.log('clickId', productId);\n    let token = localStorage.getItem('authToken');\n    let userId = localStorage.getItem('userId');\n    var myHeaders = new Headers();\n    myHeaders.append('Authorization', `Bearer ${token}`);\n    var myInit = {\n      method: 'DELETE',\n      headers: myHeaders,\n      body: {\n        userId: userId\n      }\n    };\n    const request = new Request(`http://localhost:3333/product/${productId}`, myInit);\n    fetch(request).then(response => response.json()).then(jsonResponse => {\n      if (jsonResponse.Error !== undefined) alert(jsonResponse.Error);else {\n        getProducts();\n        alert('Produto removido da loja');\n      }\n    });\n  }\n\n  getProducts();\n\n  const renderProducts = () => {\n    if (products === null) return /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 35\n    }, this);else if (products.error !== null && products.error !== undefined) return /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: 'red'\n      },\n      children: \"Voc\\xEA n\\xE3o possui nenhum produto a venda\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 14\n    }, this);else {\n      return products.map((product, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          productId: product._id,\n          name: product.nome,\n          image: product.imagem,\n          description: product.descricao,\n          price: product.preco,\n          tag: \"\",\n          buttonConfig: {\n            icon: 'rm',\n            text: 'Remover o ítem da loja',\n            onClickRemove\n          },\n          onClick: id => onClickRemove(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      width: '100%',\n      justifyContent: 'center'\n    },\n    children: renderProducts()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Venda, \"/ZAmBmUKriWz3XDcp0xu079Wyow=\");\n\n_c = Venda;\nexport default Venda;\n\nvar _c;\n\n$RefreshReg$(_c, \"Venda\");","map":{"version":3,"sources":["/home/lucaslopes/Área de Trabalho/2020.2_G4-Meubrecho-frontend/src/pages/Venda/index.js"],"names":["React","useState","history","CircularProgress","Item","Venda","products","setProducts","getProducts","token","localStorage","getItem","length","console","log","myHeaders","Headers","append","myInit","method","headers","request","Request","fetch","then","response","status","clear","push","json","jsonResponse","arrayProduct","error","catch","e","onClickRemove","productId","userId","body","Error","undefined","alert","renderProducts","color","map","product","index","_id","nome","imagem","descricao","preco","icon","text","id","display","flexDirection","width","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport history from '../../services/history';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport Item from '../../components/item/item';\n\nfunction Venda() {\n  const [products, setProducts] = useState([]);\n  const getProducts = () => {\n    let token;\n    token = localStorage.getItem('authToken');\n    if (products.length === 0) {\n      console.log('teste', products);\n      var myHeaders = new Headers();\n      myHeaders.append('Authorization', `Bearer ${token}`);\n\n      var myInit = {\n        method: 'GET',\n        headers: myHeaders\n      };\n      const request = new Request('http://localhost:3333/productbyme', myInit);\n      return fetch(request)\n        .then(response => {\n          if (response.status == 401) {\n            localStorage.clear();\n            history.push('/');\n            throw 'permission error';\n          }\n          return response.json();\n        })\n        .then(jsonResponse => {\n          console.log('api', jsonResponse);\n          if (jsonResponse.arrayProduct.length !== 0) setProducts(jsonResponse.arrayProduct);\n          else setProducts({ error: 'Sem Protutos na loja' });\n          return products;\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    } else return products;\n  };\n  function onClickRemove(productId) {\n    console.log('clickId', productId);\n    let token = localStorage.getItem('authToken');\n    let userId = localStorage.getItem('userId');\n    var myHeaders = new Headers();\n    myHeaders.append('Authorization', `Bearer ${token}`);\n\n    var myInit = {\n      method: 'DELETE',\n      headers: myHeaders,\n      body: {\n        userId: userId\n      }\n    };\n    const request = new Request(`http://localhost:3333/product/${productId}`, myInit);\n    fetch(request)\n      .then(response => response.json())\n      .then(jsonResponse => {\n        if (jsonResponse.Error !== undefined) alert(jsonResponse.Error);\n        else {\n          getProducts();\n          alert('Produto removido da loja');\n        }\n      });\n  }\n  getProducts();\n  const renderProducts = () => {\n    if (products === null) return <CircularProgress />;\n    else if (products.error !== null && products.error !== undefined)\n      return <h1 style={{ color: 'red' }}>Você não possui nenhum produto a venda</h1>;\n    else {\n      return products.map((product, index) => (\n        <div key={index}>\n          <Item\n            productId={product._id}\n            name={product.nome}\n            image={product.imagem}\n            description={product.descricao}\n            price={product.preco}\n            tag=''\n            buttonConfig={{ icon: 'rm', text: 'Remover o ítem da loja', onClickRemove }}\n            onClick={id => onClickRemove(id)}\n          />\n        </div>\n      ));\n    }\n  };\n  return (\n    <div style={{ display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'center' }}>\n      {renderProducts()}\n    </div>\n  );\n}\n\nexport default Venda;\n"]},"metadata":{},"sourceType":"module"}